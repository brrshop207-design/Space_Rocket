<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Astro Blasters</title>

<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    touch-action:none;
    font-family:'VT323', monospace;
    -webkit-tap-highlight-color:transparent;
}

body{
    background:#000;
    color:#0ff;
    height:100vh;
    display:flex;
    flex-direction:column;
}

#gameContainer{
    flex:1;
    display:flex;
    justify-content:center;
    align-items:center;
}

canvas{
    width:100%;
    max-width:480px;
    aspect-ratio:3/4;
    background:#000;
}

/* CONTROLS */
#controls{
    height:120px;
    display:flex;
    gap:20px;
    padding:15px;
    background:#050505;
}

/* ===== ARCADE CONTROL BUTTON ===== */
.control-btn{
    flex:1;
    position:relative;
    font-size:42px;
    text-align:center;
    line-height:80px;
    border-radius:16px;
    cursor:pointer;

    background:linear-gradient(
        180deg,
        rgba(255,255,255,0.08),
        rgba(0,0,0,0.4)
    );

    user-select:none;
    -webkit-user-select:none;
    -webkit-touch-callout:none;

    box-shadow:
        inset 0 0 12px rgba(255,255,255,0.15),
        0 10px 0 rgba(0,0,0,0.6),
        0 14px 20px rgba(0,0,0,0.9);

    transition:transform 0.08s, box-shadow 0.08s, filter 0.08s;
}

.control-btn:active{
    transform:translateY(6px);
    box-shadow:
        inset 0 0 18px rgba(255,255,255,0.25),
        0 4px 0 rgba(0,0,0,0.7),
        0 6px 12px rgba(0,0,0,0.8);
    filter:brightness(1.2);
}

#btnLeft{
    color:#00ffff;
    border:3px solid #00ffff;
    box-shadow:
        inset 0 0 14px rgba(0,255,255,0.4),
        0 10px 0 rgba(0,0,0,0.6),
        0 0 25px rgba(0,255,255,0.6);
}

#btnRight{
    color:#ff3355;
    border:3px solid #ff3355;
    box-shadow:
        inset 0 0 14px rgba(255,60,80,0.4),
        0 10px 0 rgba(0,0,0,0.6),
        0 0 25px rgba(255,60,80,0.6);
}
</style>
</head>

<body>

<div id="gameContainer">
    <canvas id="game" width="360" height="480"></canvas>
</div>

<div id="controls">
    <div id="btnLeft" class="control-btn">◀</div>
    <div id="btnRight" class="control-btn">▶</div>
</div>

<script>
/* =====================
   CANVAS
===================== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* =====================
   GAME STATE
===================== */
let gameOver=false;
let score=0;
let highScore=localStorage.getItem("astroHigh")||0;
let speedMultiplier=1;

/* =====================
   INPUT
===================== */
let leftPressed=false;
let rightPressed=false;

document.addEventListener("keydown",e=>{
    if(e.key==="ArrowLeft") leftPressed=true;
    if(e.key==="ArrowRight") rightPressed=true;
    if(gameOver && e.key==="Enter") restart();
});
document.addEventListener("keyup",e=>{
    if(e.key==="ArrowLeft") leftPressed=false;
    if(e.key==="ArrowRight") rightPressed=false;
});

btnLeft.onpointerdown=()=>leftPressed=true;
btnLeft.onpointerup=()=>leftPressed=false;
btnRight.onpointerdown=()=>rightPressed=true;
btnRight.onpointerup=()=>rightPressed=false;

/* =====================
   PLAYER
===================== */
const player={
    x:canvas.width/2,
    y:canvas.height-60,
    speed:5
};

/* =====================
   BOOST SYSTEM
===================== */
let boostActive=false;
let boostTimer=0;
let boostCharge=1;

const BOOST_DURATION=600; // 10s
const BOOST_COOLDOWN=600;

/* =====================
   ROCKET
===================== */
function drawRocket(){
    ctx.save();
    ctx.translate(player.x,player.y);

    if(boostActive){
        ctx.shadowColor="rgba(255,120,0,0.8)";
        ctx.shadowBlur=20;
    }

    const grad=ctx.createLinearGradient(0,-30,0,30);
    grad.addColorStop(0,"#ff3355");
    grad.addColorStop(1,"#aa001f");
    ctx.fillStyle=grad;

    ctx.beginPath();
    ctx.moveTo(0,-30);
    ctx.lineTo(16,-5);
    ctx.lineTo(12,28);
    ctx.lineTo(-12,28);
    ctx.lineTo(-16,-5);
    ctx.closePath();
    ctx.fill();

    ctx.fillStyle="#7a0018";
    ctx.beginPath();
    ctx.moveTo(-12,5);
    ctx.lineTo(-28,20);
    ctx.lineTo(-12,20);
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(12,5);
    ctx.lineTo(28,20);
    ctx.lineTo(12,20);
    ctx.fill();

    const glass=ctx.createRadialGradient(0,-5,2,0,-5,8);
    glass.addColorStop(0,"#fff");
    glass.addColorStop(0.4,"#88ddff");
    glass.addColorStop(1,"#225577");
    ctx.fillStyle=glass;
    ctx.beginPath();
    ctx.arc(0,-5,6,0,Math.PI*2);
    ctx.fill();

    const flicker=Math.random()*(boostActive?14:6);

    ctx.fillStyle="rgba(255,80,0,0.6)";
    ctx.beginPath();
    ctx.moveTo(-8,28);
    ctx.lineTo(0,(boostActive?65:45)+flicker);
    ctx.lineTo(8,28);
    ctx.fill();

    ctx.fillStyle="rgba(255,180,0,0.8)";
    ctx.beginPath();
    ctx.moveTo(-5,28);
    ctx.lineTo(0,(boostActive?55:38)+flicker);
    ctx.lineTo(5,28);
    ctx.fill();

    ctx.fillStyle="rgba(120,200,255,0.9)";
    ctx.beginPath();
    ctx.moveTo(-3,28);
    ctx.lineTo(0,(boostActive?48:34)+flicker);
    ctx.lineTo(3,28);
    ctx.fill();

    ctx.restore();
}

/* =====================
   METEORS
===================== */
const meteors=[];
function spawnMeteor(){
    const size=15+Math.random()*20;
    meteors.push({
        x:Math.random()*canvas.width,
        y:-size,
        r:size,
        speed:(2+Math.random()*2)*speedMultiplier,
        rot:Math.random()*Math.PI,
        rotSpeed:(Math.random()-0.5)*0.05
    });
}

function drawMeteor(m){
    ctx.save();
    ctx.translate(m.x,m.y);
    ctx.rotate(m.rot);
    const g=ctx.createRadialGradient(0,0,5,0,0,m.r);
    g.addColorStop(0,"#aaa");
    g.addColorStop(1,"#555");
    ctx.fillStyle=g;
    ctx.beginPath();
    for(let i=0;i<7;i++){
        const a=(Math.PI*2/7)*i;
        const r=m.r*(0.7+Math.random()*0.3);
        ctx.lineTo(Math.cos(a)*r,Math.sin(a)*r);
    }
    ctx.closePath();
    ctx.fill();
    ctx.restore();
}

/* =====================
   STARS
===================== */
const stars=Array.from({length:60},()=>({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    s:Math.random()*2,
    sp:0.5+Math.random()*1.5
}));

function drawStars(){
    ctx.fillStyle="#fff";
    stars.forEach(st=>{
        st.y+=st.sp;
        if(st.y>canvas.height) st.y=0;
        ctx.fillRect(st.x,st.y,st.s,st.s);
    });
}

/* =====================
   COLLISION
===================== */
function hit(m){
    const dx=player.x-m.x;
    const dy=player.y-m.y;
    return Math.sqrt(dx*dx+dy*dy)<m.r+12;
}

/* =====================
   LOOP
===================== */
let timer=0;
function loop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawStars();

    if(!gameOver){
        let moveSpeed=player.speed;

        if(leftPressed && rightPressed && boostCharge>=1){
            boostActive=true;
            boostTimer=BOOST_DURATION;
            boostCharge=1;
        }

        if(boostActive){
            moveSpeed*=2.2;
            boostTimer--;
            boostCharge=boostTimer/BOOST_DURATION;
            if(boostTimer<=0){
                boostActive=false;
                boostCharge=0;
            }
        }else{
            boostCharge+=1/BOOST_COOLDOWN;
            if(boostCharge>1) boostCharge=1;
        }

        if(leftPressed) player.x-=moveSpeed;
        if(rightPressed) player.x+=moveSpeed;
        player.x=Math.max(20,Math.min(canvas.width-20,player.x));

        drawRocket();

        timer++;
        if(timer>40){
            spawnMeteor();
            timer=0;
        }

        meteors.forEach(m=>{
            m.y+=m.speed;
            m.rot+=m.rotSpeed;
            drawMeteor(m);
            if(hit(m)) gameOver=true;
        });

        score++;
        speedMultiplier+=0.0005;
    }

    /* HUD */
    ctx.fillStyle="#0ff";
    ctx.font="20px VT323";
    ctx.fillText("SCORE "+score,10,20);
    ctx.fillText("HI "+highScore,canvas.width-80,20);

    /* BOOST BAR */
    const barW=100, barH=8;
    const barX=canvas.width/2-barW/2;
    const barY=32;
    ctx.fillStyle="#222";
    ctx.fillRect(barX,barY,barW,barH);
    ctx.fillStyle=boostActive?"#ff8800":"#00ffcc";
    ctx.fillRect(barX,barY,barW*boostCharge,barH);
    ctx.strokeStyle="#fff";
    ctx.strokeRect(barX,barY,barW,barH);
    ctx.font="14px VT323";
    ctx.fillStyle="#fff";
    ctx.fillText("BOOST",barX+barW/2-16,barY-2);

    if(gameOver){
        if(score>highScore){
            highScore=score;
            localStorage.setItem("astroHigh",highScore);
        }
        ctx.fillStyle="#ff0044";
        ctx.font="40px VT323";
        ctx.textAlign="center";
        ctx.fillText("GAME OVER",canvas.width/2,canvas.height/2);
        ctx.font="22px VT323";
        ctx.fillText("TAP / ENTER",canvas.width/2,canvas.height/2+40);
        canvas.onclick=restart;
    }

    requestAnimationFrame(loop);
}

function restart(){
    gameOver=false;
    score=0;
    meteors.length=0;
    speedMultiplier=1;
    boostCharge=1;
}

loop();
</script>
</body>
</html>